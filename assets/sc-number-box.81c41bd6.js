import{d as e,r as a,w as t,o as n,C as s,D as l,b as i,e as r,f as u,h as o,i as d,m as c,j as m,H as b,_ as p,s as x,a9 as f}from"./index.4b002d2b.js";import{_ as g}from"./sc-icon.52d4ad3f.js";import{_}from"./_plugin-vue_export-helper.cdc0426e.js";const y=_(e({__name:"sc-number-box",props:{...{value:{type:[Number,String],default:1},min:{type:Number,default:1},max:{type:Number,default:99},step:{type:Number,default:1},disabled:{type:Boolean,default:!1},iconBackground:{type:String,default:"transparent"},radius:{type:String,default:"50%"},iconSize:{type:Number,default:32},iconColor:{type:String,default:"#666666"},height:{type:Number,default:42},width:{type:Number,default:80},size:{type:Number,default:28},backgroundColor:{type:String,default:"#F5F5F5"},color:{type:String,default:"#333"},index:{type:[Number,String],default:0}}},emits:["change"],setup(e,{emit:_}){const y=e,h=a(0);function v(e){if(y.disabled||h.value===y.min&&"reduce"===e||h.value===y.max&&"add"===e)return;const a=function(e,a){let t=1,n=1;return Number.isInteger(a)||(t=10**String(a).split(".")[1].length),Number.isInteger(e)||(n=10**String(e).split(".")[1].length),Math.max(t,n)}(h.value,y.step);let t=h.value*a;const n=y.step*a;"reduce"===e?t-=n:"add"===e&&(t+=n),t=Number((t/a).toFixed(String(a).length-1)),t<y.min?t=y.min:t>y.max&&(t=y.max),z(t,e)}function N(){v("add")}function S(){v("reduce")}function k(e){let a,{value:t}=e.detail;t?(~t.indexOf(".")&&Number.isInteger(y.step)&&Number.isInteger(Number(t))&&(t=t.split(".")[0]),a=Number(t),a>y.max?a=y.max:a<y.min&&(a=y.min)):a=y.min,(a===Number(y.value)&&a!==h.value||!e.detail.value)&&(h.value=a),z(a,"blur")}function z(e,a){y.disabled||_("change",{value:e,type:a,index:y.index})}return t((()=>y.value),(e=>h.value=+e)),n((()=>h.value=+y.value)),(e,a)=>{const t=s(l("sc-icon"),g),n=x,_=f;return i(),r(n,{class:"sc-number-box flex items-center"},{default:u((()=>[o(n,{class:d(["sc-number-box__icon__box",[e.disabled||e.min>=c(h)?"sc-disabled opacity-50":""]]),style:m({background:e.iconBackground,borderRadius:e.radius}),onClick:S},{default:u((()=>[b(e.$slots,"minus",{},(()=>[o(t,{class:"sc-number-box__icon sc-number-box__icon-reduce px-10rpx",name:"minus",size:`${e.iconSize}rpx`,color:e.iconColor},null,8,["size","color"])]),!0)])),_:3},8,["style","class"]),o(_,{modelValue:c(h),"onUpdate:modelValue":a[0]||(a[0]=e=>p(h)?h.value=e:null),type:"number",disabled:e.disabled,class:"sc-number-box__input text-center",style:m({color:e.color,fontSize:`${e.size}rpx`,background:e.backgroundColor,height:`${e.height}rpx`,minHeight:`${e.height}rpx`,width:`${e.width}rpx`}),onBlur:k},null,8,["modelValue","disabled","style"]),o(n,{class:d(["sc-number-box__icon__box",[e.disabled||c(h)>=e.max?"sc-disabled opacity-50":""]]),style:m({background:e.iconBackground,borderRadius:e.radius}),onClick:N},{default:u((()=>[b(e.$slots,"plus",{},(()=>[o(t,{class:"sc-number-box__icon sc-number-box__icon--plus px-10rpx",name:"add",size:`${e.iconSize}rpx`,color:e.iconColor},null,8,["size","color"])]),!0)])),_:3},8,["style","class"])])),_:3})}}}),[["__scopeId","data-v-15ed3404"]]);export{y as _};
