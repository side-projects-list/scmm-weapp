import{d as e,a2 as t,r as a,ae as s,b as r,e as l,f as n,h as c,p as o,m as u,k as p,A as d,F as i,t as f,_ as x,af as m,W as _,s as h,B as g,a3 as v,C as b,D as y,M as k,a9 as w,ag as j,ad as U,ah as I}from"./index.4b002d2b.js";import{_ as F}from"./sc-icon.52d4ad3f.js";import{_ as A}from"./sc-button.3d3eb510.js";import{_ as C}from"./sc-popup.5c6e9a7f.js";import"./uni-qrcode.a0d42b81.js";import{_ as M}from"./_plugin-vue_export-helper.cdc0426e.js";function V(e,t=3,a=4){const s=e.length||0;return e&&0!==s?1===s?e[0]+"*".repeat(s):s<=t?e[0]+"*".repeat(s-1):s<=t+a?e[0]+"*".repeat(s-2)+e[s-1]:e.slice(0,t)+"*".repeat(s-a-t)+e.slice(s-a):""}const z=M(e({__name:"index",setup(e){const M=t(),z=a(s("button.open-type.chooseAvatar"));z.value=!1;const P=a(!1);function q(e){M.updateUserInfo("avatar",e.detail.avatarUrl)}function B(){m({count:1,sizeType:["compressed"],success:e=>{M.updateUserInfo("avatar",e.tempFilePaths[0])},fail:e=>{e&&e.errMsg&&(e.errMsg.includes("cancel")||_({title:e.errMsg,icon:"none"}))}})}function D(){P.value=!P.value}function G(e){const{nickname:t}=e.detail.value;if(0===t.length)return _({title:"请输入昵称！",icon:"none"});M.updateUserInfo("nickname",t),D()}function N(){}return(e,t)=>{const a=h,s=g,m=v,_=b(y("sc-icon"),F),R=k,S=b(y("sc-button"),A),T=w,W=j,E=b(y("sc-popup"),C);return r(),l(a,{class:"profile-index pt-32rpx"},{default:n((()=>[c(a,{class:"px-32rpx bg-white text-32rpx"},{default:n((()=>[c(a,{class:"flex items-center justify-between py-20rpx"},{default:n((()=>[c(a,{class:"text-gray-light"},{default:n((()=>[o(" 头像 ")])),_:1}),c(a,{class:"reset-button"},{default:n((()=>[u(z)?(r(),l(m,{key:0,"open-type":"chooseAvatar",onChooseavatar:q},{default:n((()=>[c(a,{class:"w-112rpx h-112rpx flex items-center justify-center"},{default:n((()=>{var e;return[(null==(e=u(M).getUserInfo())?void 0:e.avatar)?(r(),l(s,{key:0,class:"w-full h-full rounded-112rpx",src:u(M).getUserInfo().avatar,mode:"aspectFill"},null,8,["src"])):(r(),l(s,{key:1,src:u(U),mode:"aspectFill",class:"w-96rpx h-96rpx rounded-circle"},null,8,["src"]))]})),_:1})])),_:1})):(r(),p(i,{key:1},[d(" 兼容不支持 chooseAvatar 类型 "),c(a,{onClick:B},{default:n((()=>[c(a,{class:"w-112rpx h-112rpx flex items-center justify-center"},{default:n((()=>{var e;return[(null==(e=u(M).getUserInfo())?void 0:e.avatar)?(r(),l(s,{key:0,class:"w-full h-full rounded-112rpx",src:u(M).getUserInfo().avatar,mode:"aspectFill"},null,8,["src"])):(r(),l(s,{key:1,src:u(U),mode:"aspectFill",class:"w-96rpx h-96rpx rounded-circle"},null,8,["src"]))]})),_:1})])),_:1})],2112))])),_:1})])),_:1}),c(a,{class:"flex items-center justify-between py-34rpx",onClick:D},{default:n((()=>[c(a,{class:"text-gray-light"},{default:n((()=>[o(" 昵称 ")])),_:1}),c(a,{class:"flex items-center text-black"},{default:n((()=>{var e;return[o(f((null==(e=u(M).getUserInfo())?void 0:e.nickname)||"")+" ",1),c(_,{name:"arrow-right",size:"20"})]})),_:1})])),_:1}),c(a,{class:"flex items-center justify-between py-34rpx"},{default:n((()=>[c(a,{class:"text-gray-light"},{default:n((()=>[o(" 手机号 ")])),_:1}),c(a,{class:"flex items-center reset-button"},{default:n((()=>[c(S,{"border-color":"transparent",height:"50rpx",plain:"","open-type":"getPhoneNumber",onGetphonenumber:N},{default:n((()=>[c(R,{class:"text-32rpx text-black"},{default:n((()=>{var e;return[o(f(u(V)((null==(e=u(M).getUserInfo())?void 0:e.phone)||"")),1)]})),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),c(E,{modelValue:u(P),"onUpdate:modelValue":t[0]||(t[0]=e=>x(P)?P.value=e:null),radius:"24rpx"},{default:n((()=>[c(a,{class:"modal-content w-500rpx p-32rpx box-border rounded"},{default:n((()=>[c(W,{onSubmit:G,onReset:D},{default:n((()=>[c(a,{class:"text-38rpx font-500 text-center"},{default:n((()=>[o(" 编辑昵称 ")])),_:1}),c(a,{class:"py-60rpx"},{default:n((()=>{var e;return[c(T,{value:null==(e=u(M).getUserInfo())?void 0:e.nickname,name:"nickname",type:"nickname",placeholder:"请输入昵称"},null,8,["value"])]})),_:1}),c(a,{class:"flex items-center justify-between"},{default:n((()=>[c(S,{height:"72rpx",width:"208rpx",background:"#c8c8c8","form-type":"reset",radius:"72rpx"},{default:n((()=>[c(R,{class:"font-500 text-32rpx text-white leading-72rpx"},{default:n((()=>[o(" 取消 ")])),_:1})])),_:1}),c(S,{height:"72rpx",width:"208rpx",background:u(I),"form-type":"submit",radius:"72rpx"},{default:n((()=>[c(R,{class:"font-500 text-32rpx text-white leading-72rpx"},{default:n((()=>[o(" 保存 ")])),_:1})])),_:1},8,["background"])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}}}),[["__scopeId","data-v-09422d31"]]);export{z as default};
