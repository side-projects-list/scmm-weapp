import{u as e,_ as t}from"./sc-scroll-top.615c849b.js";import{u as r}from"./hook-handler.d0811128.js";import{u as a}from"./order-store.0b99a3d0.js";import{d as s,b as o,e as l,f as c,h as d,p,t as u,a0 as n,B as i,s as m,ai as x,r as f,y as h,z as _,m as b,_ as y,k as w,l as k,F as g,a9 as j,C as v,D}from"./index.4b002d2b.js";import{_ as C}from"./sc-button.3d3eb510.js";import{_ as z}from"./sc-empty.0e0c468b.js";import{_ as N}from"./sc-load-more.c7300637.js";import{_ as P}from"./ic_search.22172ccc.js";import"./order.c4e6208f.js";import{P as V}from"./product.d0fc3ac7.js";import{_ as q}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as B}from"./route.99ab519a.js";import"./uni-qrcode.a0d42b81.js";import{g as I}from"./product.8632e308.js";import"./sc-icon.52d4ad3f.js";const R=q(s({__name:"sc-search-product",props:{...{keyword:{type:String,default:""},itemData:{type:Object,default:()=>V[0]}}},emits:["buyNow","detail"],setup(e,{emit:t}){const r=e;function a(e){if(!r.keyword)return e;const t=new RegExp(r.keyword,"gi");return e.replace(t,`<span class="text-error">${r.keyword}</span>`)}return(e,r)=>{const s=i,f=m,h=x;return o(),l(f,{class:"sc-search-product py-48rpx px-32rpx flex content-start",onClick:r[1]||(r[1]=r=>t("detail",e.itemData))},{default:c((()=>[d(f,{class:"w-128rpx h-128rpx flex-shrink-0 rounded-8rpx overflow-hidden mr-24rpx"},{default:c((()=>[d(s,{src:e.itemData.cover,class:"w-full h-full rounded-8rpx"},null,8,["src"])])),_:1}),d(f,{class:"w-full"},{default:c((()=>[d(h,{class:"text-32rpx font-500 line-clamp-2",nodes:a(e.itemData.name)},null,8,["nodes"]),d(f,{class:"mt-48rpx flex justify-between"},{default:c((()=>[d(f,{class:"text-error font-600 text-32rpx"},{default:c((()=>[p(" ¥ "+u(e.itemData.price),1)])),_:1}),d(f,{class:"w-160rpx h-48rpx text-white text-24rpx rounded-80rpx bg-error font-500 flex justify-center content-center leading-48rpx","hover-class":"opacity-80","hover-start-time":"0","hover-stay-time":"30",onClick:r[0]||(r[0]=n((r=>t("buyNow",e.itemData)),["stop"]))},{default:c((()=>[p(" 立即购买 ")])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-940c4dc4"]]),S=q(s({__name:"index",setup(s){const{handlePageScroll:u,scrollTop:n}=e(),{handlePulldownRefresh:x}=r(),V=a(),q=f(""),S=f([]),T=f("no-more");function $(){S.value=[],T.value="loading",setTimeout((()=>{T.value="no-more",S.value=I(q.value)}),801)}function E(e){V.setCheckoutData({product:e,quality:1}),B("/pages/order/checkout/index")}return h(u),_((()=>{S.value=[],T.value="no-more",q.value="",x()})),(e,r)=>{const a=i,s=m,u=j,x=v(D("sc-button"),C),f=v(D("sc-empty"),z),h=v(D("sc-load-more"),N),_=v(D("sc-scroll-top"),t);return o(),l(s,{class:"product-index pb-safe-40"},{default:c((()=>[d(s,null,{default:c((()=>[d(s,{class:"fixed product-index__search left-0 right-0 z-2 p-32rpx flex items-center bg-white"},{default:c((()=>[d(s,{class:"mr-14rpx rounded-60rpx h-60rpx w-full border border-2rpx border-opacity-8 border-black box-border px-20rpx flex items-center"},{default:c((()=>[d(s,{class:"mr-10rpx flex-shrink-0"},{default:c((()=>[d(a,{src:P,class:"w-32rpx h-32rpx"})])),_:1}),d(u,{modelValue:b(q),"onUpdate:modelValue":r[0]||(r[0]=e=>y(q)?q.value=e:null),placeholder:"请输入搜索关键词，如：车","placeholder-class":"text-gray-light text-28rpx",class:"text-28rpx flex-1"},null,8,["modelValue"])])),_:1}),d(s,{class:"flex-shrink-0"},{default:c((()=>[d(x,{width:"116rpx",height:"60rpx",radius:"60rpx",size:"28",onClick:$},{default:c((()=>[p(" 搜索 ")])),_:1})])),_:1})])),_:1}),d(s,{class:"w-full h-132rpx"})])),_:1}),d(s,{class:"bg-white mt-32rpx"},{default:c((()=>[(o(!0),w(g,null,k(b(S),(e=>(o(),l(R,{key:e.id,"item-data":e,keyword:b(q),onBuyNow:E,onDetail:r[1]||(r[1]=e=>b(B)(`/pages/product/detail/index?id=${e.id}`))},null,8,["item-data","keyword"])))),128))])),_:1}),"no-more"===b(T)&&0===b(S).length?(o(),l(f,{key:0,text:"空空如也～",mode:"no-result","margin-top":"200"})):(o(),l(h,{key:1,status:b(T)},null,8,["status"])),d(_,{"scroll-top":b(n)},null,8,["scroll-top"])])),_:1})}}}),[["__scopeId","data-v-a48c174c"]]);export{S as default};
