import{u as e,s as t,_ as s}from"./sc-order-product.cf0011e0.js";import{u as a}from"./hook-handler.d0811128.js";import{d as l,r,x as d,Z as o,z as i,b as p,e as c,f as n,h as u,i as x,m as A,p as f,t as m,A as g,k as h,l as b,F as y,_ as w,aa as M,B as O,s as j,C as E,D as z,M as k,$ as S,a6 as U}from"./index.4b002d2b.js";import{a as I}from"./order.e64a24ff.js";import{_ as D}from"./sc-countdown.dec08283.js";import{_ as J}from"./sc-button.3d3eb510.js";import{a as v}from"./order.c4e6208f.js";import{t as Q}from"./index.dfc28261.js";import{t as T,r as B}from"./route.99ab519a.js";import{_ as F}from"./_plugin-vue_export-helper.cdc0426e.js";import"./uni-qrcode.a0d42b81.js";import"./sc-icon.52d4ad3f.js";import"./sc-popup.5c6e9a7f.js";import"./product.d0fc3ac7.js";const C=F(l({__name:"index",setup(l){const{openPopup:F,showPopup:C,canvasId:K,qrCodeImageUrl:N}=e(),{handlePulldownRefresh:W}=a(),q=r({}),H=d((()=>q.value.verificationCode.filter((e=>0===e.status)).length)),L=d((()=>q.value.status===v["待支付"])),Y=d((()=>{const{status:e,availableAt:t}=q.value;let s="感谢您，期待您的下次光临！";return e===v["待使用"]&&(s=`请您在 ${t} 前使用`),s}));function R(){q.value.status=v["已失效"]}function G(){M({data:q.value.orderNumber,showToast:!0})}return o((e=>{const{id:t}=e;if(!Number(t))return Q("无效单号！"),void setTimeout((()=>{T()}),1501);q.value=I(Number(t))||{}})),i(W),(e,a)=>{const l=O,r=j,d=E(z("sc-countdown"),D),o=k,i=E(z("sc-popup-qr-code"),s),M=S,I=E(z("sc-button"),J);return p(),c(r,{class:"order-detail"},{default:n((()=>[u(r,null,{default:n((()=>[u(r,{class:x(["order-detail__banner fixed z-20 left-0 right-0 h-208rpx box-border px-64rpx py-60rpx leading-none",[A(L)?"bg-error text-white":A(v)["待使用"]===A(q).status?"bg-primary text-white":"bg-gray-placeholder"]])},{default:n((()=>[[A(v)["待支付"],A(v)["待使用"]].includes(A(q).status)?(p(),c(l,{key:0,src:"data:image/png;base64,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",class:"w-196rpx h-138rpx absolute right-0 bottom-0"})):(p(),c(l,{key:1,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASYAAADPBAMAAACq1mEXAAAAElBMVEUAAAAAAAAAAAAAAAAAAAAAAADgKxmiAAAABnRSTlMZAAkSDgZfNeTtAAAFMklEQVR42u2cybbTMAyG/5Jm70z7lGFvKA8QKOwThvd/FVhwyqBYsl3LFefkW95Dlc+x5OFWXHQJTK+vHg/TXN9/7zgSnPoFxWg+F3G6oSjn7WGnyaM0F8lJX4ny4TEnDw0ujzjN0OEBpwFKnLOdJqjxNtdpgR6ZTiMUafOcFmiy5TiNUOWU47RAlwynCcq8TXdyUOac7uShzZbq1EOdU6qTgzrnVKcF+mxpThMq8DbNaUAF2jSnFRVo0pw8arAlOaEKH1KcRlThlOLkUIUXKU4zqtAwTmyKn18WZcYfpDiRRCzHFC48xH6u6QozB8eL2LJ72xVmDBYeYneWrjg+y8mRT2UhR2/jnVYy4yWZAkco3mkhU1cUv1tAghOpurLMgSEj7uW2nQKOpIbsNGqlOHV6G+ekXXahMfNOKxlHSUKFxzmplx2pIdlJvewCg2adJnLoKgspPNGJpKACw17CMk6kVBXo90bNOq3kzFUckh28E8lADZadKmKdyOpRnnVn2JzTpJ7if6XsJcZpVElx+RmMExmDCmQuOCcy1zp4WniME6kJFWb6EM6JHOg0cLgjOpGyU2KkScs4jYl3ljwmWniMk6uR4qTweKeVZJ8KCyk8xmnWOTzJQ2ecvEaKUwaSIowTST4d+p3Cg/xvt04PMnbGibxTLWiOhJ0cOTwpsZJaCjrNdVL8z8E3kpMn06zESJIk6ER2FiVo4QWcKpYdKbyQU8Wyo4UXcCKZpwfd8YJOc62lYO+oCemFtp0yDnc4J3Ks0WQghbfv1JNi0IPe8fDzh550IQw6y5M0/vb2aw576ftjbUCQOi06dTz+ZZS+FlWHvhQnNbioM+NfFqlvQx36VnxyC56+Ewy+J7EdQZ0VBIN1J9Gpg0iq7i0S9QvPIZb6ZzqZmncEc5M3AICx1WABxYNB/6Q5YofluS9q9/GuekbJ2dQ/c92csEvnn7jB+MDjxuctnEvwFQwxUgor57Rw0/Ll5iHxubRS76VUkbWajy8L8trHpO8EM/yxVJjh7uRghj8K0wx3J9jhXpqwg8EUh8EUvzvNsMPvLdoOBssO9naWu9MIQxhcCmBwKbDstMIQBpdM2DupHE6xGNzuDqfDqSgGj0+HUyQGj5mGnSzdgi07mboiGHYydW0x7GTq2nI4/fdOpq6chp1MXYNh8Hpn2MmD43r10KC5Zjo1b8g3gAX//OkXzziJjWJfUZTz77gBJ16J26ebqwSjROISJ+kL8znvG/Ve6u1Y05w2qR0gs9niwsZlry0nqeHllNfa0DJxJSemSUHqGmEnZ+PjcteWk9gZlNcp0zJxJadNnIW8JqeLEJd8iK0pl9UaNYqfcoyTlMB9npMYd6JOQ3THoS/gdGHiUif5gWsBJzFu+DjesiWU7/SCiSs5nZjwiU5y3IlxEtfDPCe5tzLOaWP3iXynTexjIxkmrIdLlpMcd8ZvyA+E582POjXynph6MlqVnNy/Tku8k3vU6fyA04snO/nDKc7JYD7BYN2h4vqEyPUJBtdxGNzvkHkuQI6THJcMnj9T9DlOQ875ycefM7PunHLckTgh/jyeczePiOuoU+a9BYhLJznuwjgJCdXTHUhk8hEHfTBOwvMcneFPAreE+7XsBH7q8tmYqSNO8u9VinBiUkJyauhwykA2FsZJ/j2dyovqkeAEjddEM2rhnPgSWZGDHHdAkhPa0jNH15kRiU541/3iG6AiNYJxYv9L2XRDDnLcV8hwApr3n64ohxzXXkfW4XQ4HU4RHE5xHE5xHE7P4QddS8i3qMMoIgAAAABJRU5ErkJggg==",class:"w-196rpx h-138rpx absolute right-0 bottom-0"})),u(r,{class:"box-border px-64rpx py-60rpx absolute top-0 right-0 bottom-0 left-0"},{default:n((()=>[u(r,{class:"text-44rpx font-600"},{default:n((()=>[f(m(A(v)[A(q).status]),1)])),_:1}),A(L)?(p(),c(r,{key:0,class:"mt-16rpx flex items-center"},{default:n((()=>[f(" 请在 "),u(d,{time:900,hours:!1,"border-color":"transparent","colon-color":"white",color:"white","background-color":"transparent","is-colon":!0,size:28,"colon-size":28,onEnd:R}),f(" 内完成支付 ")])),_:1})):(p(),c(r,{key:1,class:"inline-flex items-center mt-16rpx"},{default:n((()=>[f(m(A(Y)),1)])),_:1}))])),_:1})])),_:1},8,["class"]),u(r,{class:"w-full h-208rpx"})])),_:1}),g(" 商品信息 "),u(r,{class:"mx-32rpx mt-32rpx rounded-24rpx bg-white py-32rpx pl-30rpx pr-36rpx box-border"},{default:n((()=>[g(" 商品信息 "),u(r,{class:"flex items-start",onClick:a[0]||(a[0]=e=>A(B)(`/pages/product/detail/index?id=${A(q).product.id}`))},{default:n((()=>[u(t,{"item-data":A(q)},null,8,["item-data"])])),_:1}),u(r,{class:"mt-40rpx pt-26rpx flex justify-between border-t border-gray-light"},{default:n((()=>[u(r,null,{default:n((()=>[f("实付金额")])),_:1}),u(r,{class:"text-error font-600 text-32rpx"},{default:n((()=>[f(" ¥ "+m(A(q).price),1)])),_:1})])),_:1})])),_:1}),g(" 普通卡券信息 "),A(v)["待支付"]!==A(q).status?(p(),c(r,{key:0,class:"mx-32rpx mt-32rpx rounded-24rpx bg-white box-border p-32rpx"},{default:n((()=>[g(" 到期时间、二维码 "),u(r,{class:"flex items-center justify-between border-b-gray-light border-b pb-16rpx"},{default:n((()=>[u(r,{class:"flex items-center"},{default:n((()=>[u(r,null,{default:n((()=>[f(" 剩余次数："),u(o,{class:"text-error font-600"},{default:n((()=>[f(m(A(H)),1)])),_:1})])),_:1}),u(r,{class:"w-1rpx h-20rpx bg-gray-placeholder mx-24rpx"}),u(r,{class:"text-gray-light"},{default:n((()=>[f(m(A(q).availableAt)+" 到期 ",1)])),_:1})])),_:1}),A(H)>0?(p(),c(r,{key:0,class:"w-44rpx h-44rpx flex-shrink-0"},{default:n((()=>[u(l,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAMAAABiM0N1AAAAP1BMVEUAAAAyMjIyMjIyMjI0NDQyMjIyMjI1NTUyMjIzMzM0NDQzMzMyMjIwMDAzMzM0NDQyMjIzMzMyMjIzMzMzMzPLbvP3AAAAFHRSTlMA4MCgIGCAEO+wQDBwQM+AkK/QULt7CfgAAAMTSURBVFjD7VfRtpwgDNwACoKi7vL/39pT0Z1AQO85fWubJzc7GZJAQnj9K7KMO6WU4j6bHsTMO7mUSI2hSzOoBFFLcyUOoaFJEzIGoo3wpoZQw/E5CaFQLeUkZq55xtSSoYi8CRlv/IG4wPyBuu+Tgf6t9fRGdPYLISgLSOIJuEButdlKX6jtgnw1OmTIeikUi15uQri4fekzeYRBIpOEOABzhUu6sd+W4BJPoysPhT+19rDB4o3FfLn162ExuhTzRiiG+pz5yXhKpE22xBGAhUHcOruE2DZGqs88wNGpSFHkezNUqCl/nzsDN2ImPYmYASXxQ8HpyPxPji1cEGl8wvqGKEkiB6J7j4hHH8uQYUC8dj3PEaxt3gOchAhO0AZYrDmrSOrMjFcEYLAWQ+mzTSrtT0ex5Z6fYT+paeDnfa5q34sOha11MJGd5VsSCoUkClmDtq4RQ3X5e9nN51SuZp3oiIsTkeBs6OWwwn2yil5Mw1EcC2xEGZ/ASOwHMJFpFYcYkTYIQCIjQkJ1OfZ4HpicuCSDhEXwgOn+6kPDh7hVYtaKZ7MVAFSgsW0IAbL5V0/sZ5uUUnoGRIgff0OmzdvXf/kTscu2K6X2cZGzmlZq+Kl2Q8lRNa+NqM8nrd1uRqgFuidtoLtSm0Q36GkHd1u0uMwgQvvcRn7ukaFO14qNDm6CFVox1ylvj1ZLdcb15aFRGMGhrbLvvGgY7lp9fh8d4fSdbKF9vI7kHK2lWg7HoTV6uxLrMGWUIq/sXe1LNfpBMPeIEsEuGrg+suDmDpEsET6bzHKs0T0iWSKIOnOWU5fqEuFAPox+8YEIJSKJHHBtj1yPCAZRTC9io0uAJJowIFqCdwsGdggAkggPgfMGpJXzf8BSAiSRbz5qhgRHOwIiKOQzi7AHz0T9h99CGP1QDPg8xIGoph6zXcDDU94XYxLS6rRx15rqXotiwCcX0QCEBNmdpx4ROqKUoZFW1SPq++SyP88e0f2EqEzjHYBPiDgiA3Eaf2rFfaG7tx8kjIpScjTN+K+4Rc7Pcmj922fAX+dYoX+7m2YbAAAAAElFTkSuQmCC",class:"w-full h-full",onClick:a[1]||(a[1]=e=>A(F)(A(q)))})])),_:1})):g("v-if",!0)])),_:1}),g(" 券号、使用日期 "),(p(!0),h(y,null,b(A(q).verificationCode,(e=>(p(),c(r,{key:e.id,class:"flex items-center justify-between mt-32rpx"},{default:n((()=>[u(r,{class:x(["text-40rpx font-600",1===e.status?"line-through text-gray-light":""])},{default:n((()=>[f(m(e.code),1)])),_:2},1032,["class"]),1===e.status?(p(),c(r,{key:0,class:"text-gray-light"},{default:n((()=>[f(m(e.updatedAt),1)])),_:2},1024)):g("v-if",!0)])),_:2},1024)))),128))])),_:1})):g("v-if",!0),g(" 订单信息 "),u(r,{class:"mx-32rpx bg-white mt-32rpx rounded-24rpx py-32rpx leading-none text-gray-light"},{default:n((()=>[u(r,{class:"h-80rpx flex justify-between items-center px-32rpx"},{default:n((()=>[u(r,null,{default:n((()=>[f("订单编号")])),_:1}),u(r,{class:"flex items-center"},{default:n((()=>[f(m(A(q).orderNumber),1),u(o,{class:"ml-15rpx"},{default:n((()=>[f(" | ")])),_:1}),u(r,{class:"pl-15rpx text-primary","hover-class":"opacity-80","hover-start-time":"0","hover-stay-time":"30",onClick:G},{default:n((()=>[f(" 复制 ")])),_:1})])),_:1})])),_:1}),u(r,{class:"h-80rpx flex justify-between items-center px-32rpx"},{default:n((()=>[u(r,null,{default:n((()=>[f("下单时间")])),_:1}),u(r,{class:"flex items-center"},{default:n((()=>[f(m(A(q).createdAt),1)])),_:1})])),_:1}),u(r,{class:"h-80rpx flex justify-between items-center px-32rpx"},{default:n((()=>[u(r,null,{default:n((()=>[f("订单状态")])),_:1}),g(" 未支付时，文字黑色 "),u(r,{class:x(["flex items-center",A(L)?"text-black":""])},{default:n((()=>[f(m(A(v)[A(q).status]),1)])),_:1},8,["class"])])),_:1}),g(" 待支付订单不显示 "),A(q).status!==A(v)["待支付"]?(p(),c(r,{key:0,class:"h-80rpx flex justify-between items-center px-32rpx"},{default:n((()=>[u(r,null,{default:n((()=>[f("支付时间")])),_:1}),u(r,{class:"flex items-center"},{default:n((()=>[f(m(A(q).paidAt),1)])),_:1})])),_:1})):g("v-if",!0)])),_:1}),g(" 购买须知 "),u(r,{class:"bg-white mx-32rpx rounded-24rpx px-30rpx py-32rpx mt-32rpx"},{default:n((()=>[u(r,{class:"font-600 text-32rpx"},{default:n((()=>[f(" 购买须知 ")])),_:1}),u(r,{class:"text-gray-light leading-normal mt-32rpx"},{default:n((()=>[u(r,null,{default:n((()=>[f("1、购买须知1，购买须知1购买须知1")])),_:1}),u(r,null,{default:n((()=>[f("2、须知2须知2须知2须知2须知2须知2须知2须知2须知2须知2")])),_:1})])),_:1})])),_:1}),u(i,{modelValue:A(C),"onUpdate:modelValue":a[2]||(a[2]=e=>w(C)?C.value=e:null),"qr-code-image":A(N),"item-data":A(q)},null,8,["modelValue","qr-code-image","item-data"]),g(" 弹框方式无法生成二维码，画布对象需在外部定义 "),u(M,{id:A(K),style:{width:"520px",height:"520px",position:"fixed",top:"200vh",left:"200vw"},"canvas-id":A(K)},null,8,["id","canvas-id"]),A(L)?(p(),c(r,{key:1,class:"submit-bar fixed bg-white left-0 right-0 bottom-0 px-32rpx pt-16rpx flex items-center justify-between"},{default:n((()=>[u(r,null,{default:n((()=>[f(" 合计："),u(o,{class:"text-error"},{default:n((()=>[f(" ¥ ")])),_:1}),u(o,{class:"text-32rpx text-error font-600"},{default:n((()=>[f(m(A(q).price||0),1)])),_:1})])),_:1}),u(r,null,{default:n((()=>[u(I,{background:A(U),width:"160rpx",height:"80rpx",radius:"80rpx",onClick:a[3]||(a[3]=()=>A(B)({url:`/pages/order/success/index?id=${A(q).id}`,mode:"redirectTo"}))},{default:n((()=>[u(o,{class:"font-bold"},{default:n((()=>[f(" 支付 ")])),_:1})])),_:1},8,["background"])])),_:1})])),_:1})):g("v-if",!0)])),_:1})}}}),[["__scopeId","data-v-6274f92e"]]);export{C as default};
